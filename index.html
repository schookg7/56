<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>–ü—Ä–æ—Å—Ç–∏–π 2D Minecraft –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω—É</title>
<style>
  body {
    margin:0; padding:0;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #87ceeb;
    user-select: none;
    font-family: Arial, sans-serif;
  }
  #game {
    border: 2px solid #333;
    touch-action: manipulation;
    image-rendering: pixelated;
    background: #7ec850;
    margin-top: 10px;
  }
  #toolbar {
    margin-top: 10px;
    display: flex;
    gap: 10px;
  }
  .block-btn {
    width: 40px; height: 40px;
    border: 2px solid #444;
    background: #ccc;
    cursor: pointer;
    user-select: none;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    font-size: 24px;
    border-radius: 6px;
  }
  .block-btn.selected {
    border-color: #f90;
    background: #ffb84d;
  }
</style>
</head>
<body>

<h2>–ü—Ä–æ—Å—Ç–∏–π 2D Minecraft –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω—É</h2>
<canvas id="game" width="320" height="240"></canvas>

<div id="toolbar">
  <div class="block-btn selected" data-block="grass" title="–¢—Ä–∞–≤–∞">üåø</div>
  <div class="block-btn" data-block="dirt" title="–ì—Ä—É–Ω—Ç">üü´</div>
  <div class="block-btn" data-block="stone" title="–ö–∞–º—ñ–Ω—å">‚¨õ</div>
  <div class="block-btn" data-block="water" title="–í–æ–¥–∞">üíß</div>
  <div class="block-btn" data-block="erase" title="–í–∏–¥–∞–ª–∏—Ç–∏">‚ùå</div>
</div>

<script>
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const tileSize = 20;
  const rows = Math.floor(canvas.height / tileSize);
  const cols = Math.floor(canvas.width / tileSize);

  // –ö–æ–ª—å–æ—Ä–∏ –±–ª–æ–∫—ñ–≤
  const blockColors = {
    grass: '#4CAF50',
    dirt: '#8B5A2B',
    stone: '#555555',
    water: '#2196F3',
  };

  // –ö–∞—Ä—Ç–∞ —Å–≤—ñ—Ç—É (2D –º–∞—Å–∏–≤)
  let world = [];
  for(let r=0; r<rows; r++){
    world[r] = [];
    for(let c=0; c<cols; c++){
      if(r > rows - 3) world[r][c] = 'dirt'; // –Ω–∏–∑ - –∑–µ–º–ª—è
      else if(r === rows - 3) world[r][c] = 'grass'; // –ø–æ–≤–µ—Ä—Ö–Ω—è
      else world[r][c] = null; // –ø–æ—Ä–æ–∂–Ω—å–æ
    }
  }

  // –û–±—Ä–∞–Ω–∏–π –±–ª–æ–∫
  let selectedBlock = 'grass';

  // –ú–∞–ª—é—î–º–æ —Å–≤—ñ—Ç
  function drawWorld(){
    for(let r=0; r<rows; r++){
      for(let c=0; c<cols; c++){
        const block = world[r][c];
        if(block){
          ctx.fillStyle = blockColors[block] || '#000';
          ctx.fillRect(c*tileSize, r*tileSize, tileSize, tileSize);
          // –ö—Ä–∞–π –ø–ª–∏—Ç–∫–∏
          ctx.strokeStyle = '#333';
          ctx.strokeRect(c*tileSize, r*tileSize, tileSize, tileSize);
        } else {
          // –ü–æ—Ä–æ–∂–Ω—å–æ - —Å–≤—ñ—Ç–ª–æ-–±–ª–∞–∫–∏—Ç–Ω–∏–π —Ñ–æ–Ω (–Ω–µ–±–æ)
          ctx.fillStyle = '#87ceeb';
          ctx.fillRect(c*tileSize, r*tileSize, tileSize, tileSize);
        }
      }
    }
  }

  // –û–±—Ä–æ–±–∫–∞ –∫–ª—ñ–∫—É –∞–±–æ —Ç–æ—Ä–∫–∞–Ω–Ω—è
  function placeBlock(x, y){
    const c = Math.floor(x / tileSize);
    const r = Math.floor(y / tileSize);
    if(r < 0 || r >= rows || c < 0 || c >= cols) return;

    if(selectedBlock === 'erase'){
      world[r][c] = null;
    } else {
      world[r][c] = selectedBlock;
    }
    drawWorld();
  }

  canvas.addEventListener('click', e => {
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    placeBlock(x, y);
  });

  // –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å–µ–Ω—Å–æ—Ä–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤
  canvas.addEventListener('touchstart', e => {
    e.preventDefault();
    const rect = canvas.getBoundingClientRect();
    const touch = e.touches[0];
    const x = touch.clientX - rect.left;
    const y = touch.clientY - rect.top;
    placeBlock(x, y);
  }, {passive:false});

  // –í–∏–±—ñ—Ä –±–ª–æ–∫—ñ–≤
  const buttons = document.querySelectorAll('.block-btn');
  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      buttons.forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      selectedBlock = btn.getAttribute('data-block');
    });
  });

  drawWorld();
</script>

</body>
</html>
